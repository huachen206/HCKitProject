//
//  HCBaseTable.h
//  Lottery
//
//  Created by 花晨 on 15/8/29.
//  Copyright (c) 2015年 花晨. All rights reserved.
//

#import <Foundation/Foundation.h>
#import "FMDBHelpers.h"
#import "NSObject+tableModel.h"
#import "HCBaseDAO.h"

@class HCBaseDAO;
@interface HCBaseTable : NSObject /**< 表信息*/
@property (nonatomic,strong) NSString *tableName;
@property (nonatomic,strong) NSMutableArray *typeNames;/**< 数据类型*/
@property (nonatomic,strong) NSMutableArray *columnNames;/**< 列名*/
@property (nonatomic,strong) FMDatabaseQueue *fmDbQueue;
@property (nonatomic,strong) HCBaseDBHelper *baseDBHelper;
@property (nonatomic,weak) HCBaseDAO *DAO;
@property (nonatomic,strong) Class tableModelClass;

/**
 *  eg:
 *  +(instancetype)table{
 *      MerChantTypeTable *table = [[[self class] alloc] init];
 *      table.tableName =@"MERCHANTTYPETABLE";
 *      [table addTypeName:@"VARCHAR(20) PRIMARY KEY" columnName:@"IDKEY"];
 *      [table addTypeName:@"VARCHAR(20)" columnName:@"NAMES"];
 *      [table addTypeName:@"VARCHAR(20)" columnName:@"PARENTIDKEY"];
 *      table.tableModelClass = [GBMerchantType class];
 *      return table;
 *  }
 *
 *  @return
 */
+(instancetype)table;
/**
 *
 *
 *  @param tableName   表名
 *  @param typeNames   数据类型
 *  @param columnNames 列名
 *
 *  @return self
 */
-(id)initWithTableName:(NSString *)tableName typeNames:(NSArray *)typeNames columnNames:(NSArray *)columnNames;
-(void)addTypeName:(NSString *)typeName columnName:(NSString *)columnName;
-(NSString*)primaryColumnName;


-(BOOL)creatOrUpgradeTable;
-(NSArray *)selectAll;
-(NSInteger)countOfRecord;
-(BOOL)insertWithModel:(NSObject*)baseModel;
-(BOOL)insertWithModel:(NSObject*)baseModel isIgnorePrimaryKey:(BOOL)isIgnore;/**< 主键自增时用此方法*/
-(BOOL)insertOrReplaceWithModel:(NSObject *)baseModel;
-(BOOL)insertOrReplaceWithModel:(NSObject *)baseModel isIgnorePrimaryKey:(BOOL)isIgnore;/**< 主键自增时用此方法*/
-(BOOL)insertOrReplaceWithModelList:(NSArray *)modelList;
-(BOOL)insertOrReplaceWithModelList:(NSArray *)modelList  isIgnorePrimaryKey:(BOOL)isIgnore;/**< 主键自增时用此方法*/
-(BOOL)deleteWithModel:(id)model;

@end
